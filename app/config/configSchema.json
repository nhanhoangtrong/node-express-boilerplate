{
    "properties": {
        "debug": {
            "type": "boolean"
        },
        "server": {
            "type": "object",
            "properties": {
                "host": {
                    "type": "string",
                    "format": "ipv4"
                },
                "port": {
                    "type": "integer",
                    "minimum": 1
                }
            }
        },
        "logger": {
            "type": "object",
            "required": ["level", "format", "transports"],
            "properties": {
                "level": {
                    "type": "string",
                    "enum": [
                        "error",
                        "warn",
                        "info",
                        "verbose",
                        "debug",
                        "silly"
                    ]
                },
                "format": {
                    "type": "string",
                    "enum": ["dev", "combined"]
                },
                "transports": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string",
                                "enum": ["console", "file"]
                            },
                            "level": {
                                "type": "string",
                                "enum": [
                                    "error",
                                    "warn",
                                    "info",
                                    "verbose",
                                    "debug",
                                    "silly"
                                ]
                            },
                            "filename": {
                                "type": "string",
                                "pattern": ".+\\.log"
                            }
                        }
                    }
                }
            }
        },
        "redis": {
            "type": "object",
            "properties": {
                "host": {
                    "type": "string",
                    "format": "ipv4"
                },
                "port": {
                    "type": "number"
                },
                "db": {
                    "type": "integer",
                    "minimum": 0
                },
                "url": {
                    "type": "string",
                    "format": "uri"
                }
            },
            "dependencies": {
                "host": ["port", "db"],
                "port": ["host", "db"],
                "db": ["host", "port"]
            }
        },
        "app": {
            "type": "object",
            "required": ["staticDir", "uploadsDir", "routes"],
            "properties": {
                "trust_proxy": {
                    "type": "integer",
                    "minimum": 0
                },
                "staticDir": {
                    "type": "string"
                },
                "uploadsDir": {
                    "type": "string"
                },
                "views": {
                    "type": "object",
                    "required": ["engine", "viewsDir", "layoutsDir", "partialsDir"],
                    "properties": {
                        "engine": {
                            "type": "string",
                            "const": "hbs"
                        }
                    },
                    "patternProperties": {
                        "(viewsDir|layoutsDir|partialsDir)": {
                            "type": "string",
                            "pattern": ".+/$"
                        }
                    }
                },
                "routes": {
                    "type": "object",
                    "properties": {
                        "static": {
                            "type": "string",
                            "pattern": "^/[:a-z]+"
                        },
                        "uploads": {
                            "type": "string",
                            "pattern": "^/[:a-z]+"
                        }
                    }
                }
            }
        }
    }
}
